(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{16:function(e,t,n){e.exports=n(40)},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(15),o=n.n(l),u=n(1),c=n.n(u),i=n(4),s=n(3),p=r.a.forwardRef((function(e,t){var n=Object(a.useState)(!1),l=Object(s.a)(n,2),o=l[0],u=l[1],c={display:o?"none":""},i={display:o?"":"none"},p=function(){u(!o)};return Object(a.useImperativeHandle)(t,(function(){return{toggleVisibility:p}})),r.a.createElement("div",null,r.a.createElement("span",{style:c},r.a.createElement("button",{onClick:p},e.openButtonLabel)),r.a.createElement("span",{style:i},r.a.createElement("button",{onClick:p,className:"togglableContent"},e.closeButtonLabel),r.a.createElement("br",null),e.children))}));p.displayName="Togglable";var m=p,b=function(e){var t=e.blog,n=e.likeBlog,a=e.deleteBlog;return r.a.createElement("div",{style:{paddingTop:10,paddingLeft:2,border:"solid",borderWidth:1,marginBottom:5},className:"blog"},t.title," - ",t.author,r.a.createElement(m,{openButtonLabel:"view",closeButtonLabel:"hide"},t.url,r.a.createElement("br",null),"likes ",t.likes,r.a.createElement("button",{onClick:function(){return n(t.id,t)}},"like"),r.a.createElement("br",null),t.user.name,r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){return a(t.id,t)}},"delete")))},f=function(e){var t=e.notificationMessage,n=e.messageType;return""===t?null:r.a.createElement("div",{className:n},t)},g=function(e){var t=e.handleSubmit,n=e.handleUsernameChange,a=e.handlePasswordChange,l=e.username,o=e.password;return r.a.createElement("form",{id:"loginForm",onSubmit:t},r.a.createElement("h2",null,"log in to application"),r.a.createElement("div",null,"username",r.a.createElement("input",{id:"username",type:"text",value:l,name:"username",onChange:n,autoComplete:"current-username"})),r.a.createElement("div",null,"password",r.a.createElement("input",{id:"password",type:"password",value:o,name:"password",onChange:a,autoComplete:"current-password"})),r.a.createElement("button",{id:"login-button",type:"submit"},"login"))},d=function(e){var t=e.createBlog,n=Object(a.useState)(""),l=Object(s.a)(n,2),o=l[0],u=l[1],c=Object(a.useState)(""),i=Object(s.a)(c,2),p=i[0],m=i[1],b=Object(a.useState)(""),f=Object(s.a)(b,2),g=f[0],d=f[1];return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t({title:o,author:p,url:g}),u(""),m(""),d("")}},r.a.createElement("h2",null,"Create new"),r.a.createElement("label",{htmlFor:"newBlogTitle"},"Title"),r.a.createElement("input",{id:"newBlogTitle",value:o,onChange:function(e){var t=e.target;return u(t.value)}})," ",r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"newBlogAuthor"},"Author"),r.a.createElement("input",{id:"newBlogAuthor",type:"text",value:p,onChange:function(e){var t=e.target;return m(t.value)}})," ",r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"newBlogUrl"},"URL"),r.a.createElement("input",{id:"newBlogUrl",text:"url",value:g,onChange:function(e){var t=e.target;return d(t.value)}})," ",r.a.createElement("br",null),r.a.createElement("button",{id:"submitNewNote",type:"submit"},"create"))},v=n(5),h=n.n(v),w=null,E={getAll:function(){return h.a.get("/api/blogs").then((function(e){return e.data}))},create:function(){var e=Object(i.a)(c.a.mark((function e(t){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:w}},e.next=3,h.a.post("/api/blogs",t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(i.a)(c.a.mark((function e(t,n){var a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:w}},e.next=3,h.a.put("".concat("/api/blogs","/").concat(t),n,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),remove:function(){var e=Object(i.a)(c.a.mark((function e(t){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:w}},e.next=3,h.a.delete("".concat("/api/blogs","/").concat(t),n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){w="bearer ".concat(e)}},k={login:function(){var e=Object(i.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},O=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],l=t[1],o=Object(a.useState)(null),u=Object(s.a)(o,2),p=u[0],v=u[1],h=Object(a.useState)(null),w=Object(s.a)(h,2),O=w[0],j=w[1],y=Object(a.useState)(""),x=Object(s.a)(y,2),B=x[0],S=x[1],T=Object(a.useState)(""),C=Object(s.a)(T,2),U=C[0],L=C[1],A=Object(a.useState)(null),N=Object(s.a)(A,2),I=N[0],F=N[1];Object(a.useEffect)((function(){E.getAll().then((function(e){return l(e)}))}),[]),Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedBlogappUser");if(e){var t=JSON.parse(e);F(t),E.setToken(t.token)}}),[]);var J=function(){var e=Object(i.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("remove blog",n.title," by ",n.author)){e.next=15;break}return e.prev=2,e.next=5,E.remove(t);case 5:j("success"),v("blog deleted succesfully: "),setTimeout((function(){v(null)}),5e3),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(2),j("error"),v("Unable to delete blog post"),setTimeout((function(){v(null)}),5e3);case 15:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n){return e.apply(this,arguments)}}(),z=function(){var e=Object(i.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.update(t,{likes:++n.likes});case 3:j("success"),v("you just liked: ".concat(n.title)),setTimeout((function(){v(null)}),5e3),e.next=14;break;case 8:e.prev=8,e.t0=e.catch(0),--n.likes,j("error"),v("Unable to like blog post"),setTimeout((function(){v(null)}),5e3);case 14:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),D=function(){var e=Object(i.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log("logging in with",B,U),e.prev=2,e.next=5,k.login({username:B,password:U});case 5:n=e.sent,j("success"),v("Login Successful"),setTimeout((function(){v(null)}),5e3),window.localStorage.setItem("loggedBlogappUser",JSON.stringify(n)),E.setToken(n.token),F(n),S(""),L(""),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(2),j("error"),v("Wrong credentials"),setTimeout((function(){v(null)}),5e3);case 21:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),console.log('logging out /"',B,'/"');try{window.localStorage.removeItem("loggedBlogappUser"),E.setToken(null),F(null),S(""),L("")}catch(n){j("error"),v("Unable to Logout"),setTimeout((function(){v(null)}),5e3)}case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=Object(a.useRef)();return r.a.createElement("div",null,r.a.createElement(f,{notificationMessage:p||"",messageType:O||""}),null===I?r.a.createElement(g,{username:B,password:U,handleUsernameChange:function(e){var t=e.target;return S(t.value)},handlePasswordChange:function(e){var t=e.target;return L(t.value)},handleSubmit:D}):r.a.createElement("div",null,r.a.createElement("h2",null,"blogs"),r.a.createElement("p",null,I.name," logged-in",r.a.createElement("button",{onClick:R},"logout")),r.a.createElement(m,{openButtonLabel:"new note",closeButtonLabel:"cancel",ref:M},r.a.createElement(d,{createBlog:function(e){M.current.toggleVisibility(),E.create(e).then((function(t){l(n.concat(t)),j("success"),v("a new blog: ".concat(e.title," by ",e.author," added.")),setTimeout((function(){v(null)}),5e3)})).catch((function(){j("error"),v("Unable to create new blog post"),setTimeout((function(){v(null)}),5e3)}))}})),r.a.createElement("div",{id:"blogLists"},n.sort((function(e,t){return e.likes<t.likes?1:-1})).map((function(e){return r.a.createElement(b,{key:e.id,blog:e,likeBlog:z,deleteBlog:J})})))))};n(39);o.a.render(r.a.createElement(O,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.a72f8dc3.chunk.js.map